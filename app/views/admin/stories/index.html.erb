<div class='admin_page content-wrapper'>
  <h2 class='main_header'>Истории</h2>

  <table>
    <thead>
      <tr>
        <th>Имя</th>
        <th>Город</th>
        <th>Возраст</th>
        <th>История</th>
        <th>Можно прочитать на&nbsp;ивенте?</th>
        <th>Опубликована?</th>
        <th colspan="3">Действия</th>
      </tr>
    </thead>

    <tbody>
      <% @stories.each do |story| %>
      <tr>
        <td><%= story.name %></td>
        <td><%= story.city %></td>
        <td><%= story.age %></td>
        <td><%= story.content.truncate_words(4, omission: '').sub!(/[?.!,;]?$/, '') + '...' %></td>
        <td><%= story.allow_public_read ? 'да' : 'нет' %></td>
        <td><%= story.is_published ? 'да' : 'нет' %></td>
        <td><%= link_to admin_story_path(story) do %>
          <i class="fas fa-eye"></i>
          <% end %></td>
        <td><%= link_to  edit_admin_story_path(story) do %>
          <i class="fas fa-edit"></i>
          <% end %></td>
        <td><%= link_to admin_story_path(story), method: :delete, data: { confirm: 'Вы уверены, что хотите удалить эту историю?' } do %>
          <i class="fas fa-trash-alt"></i>
          <% end %></td>
      </tr>
      <% end %>
    </tbody>
  </table>
</div>